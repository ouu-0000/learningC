# C言語入門解説
## はじめに  
シス研でのC言語講座の時に、僕が適当にホワイトボードに書くより、ちゃんとしたサンプルコードを示すべきだと考えたのでここに書き込んでいきます。Markdown初心者だから見にくいのは許して。  
ちなみに内容は教科書の「新・明解C言語」にならっているのでもし持っている人は合わせて読んでください。  
**サンプルコードは自分で書き換えていろいろ試してみてほしい。**  
## とりあえずprintf  
まずはもっとも簡単な文字を表示するだけのサンプルコードを示します。  
```c 
#include<stdio.h>
int main(void){
  printf("Hello,World!");
  return 0;
}
```
それではサンプルコードについて解説していきます。  
`#include<stdio.h>`  
printf関数を利用するために、ヘッダファイルという偉い人が作った関数などが入っているファイルを読み込みます。scanf関数もこの中に入っています。助かる。  
`int main(void){`  
戻り値の型 関数名(引数)の形になっています。つまりmainという関数を定義しています。「関数を呼び出さないと、定義しただけでは動かないじゃないか！」と思う方がいるかもしれませんが、それは正しいです。実はmain関数はプログラムを実行すると自動で呼び出しているんです。いったい誰が？Windowsです。  
`printf("Hello,World!");`  
printfという関数は**文字列リテラル**(文字列をダブルクォーテーションで挟んだもの)を実引数として渡すとその文字列リテラルをウィンドウに表示します。  
`return 0;`  
main関数の戻り値はint型となっているため、何らかの数を返さなければなりません。`return 0;`は0を戻り値として返しています。なぜ0なのかというとプログラムが終了したときにコード0で終了することが正常に動作したことを表します。コード0以外で終了してしまうとそのプログラムは何らかの問題を抱えてることがわかります。とりあえずプログラムの最後に`return 0;`と書くことを覚えてください。    
ここまでの説明でわかる通り、文字列を画面に表示するということを実現しているのはprintf関数を呼び出している一行だけです。つまり、ほかの部分はテンプレとして書く部分で、printfのところを書き換えていけばいろいろな機能を実装していくことができます。次は変数について解説します。  
## 変数？なにそれおいしいの？
C言語で日常的に利用する型の変数を宣言し、それを表示するサンプルコードを以下に示します。  
```c
#include<stdio.h>
int main(void){
  int a = 1;  //整数型
  double b = 3.14;  //小数型
  char c = "A";  //文字型
  printf("%d\n", a);//変数の値を表示
  printf("%lf\n", b);//関数名(一個目の実引数, 二個目の実引数);の形で関数呼び出し
  printf("%c\n", c);
  return 0;
}
```  
それではサンプルコードについて解説していきます。  
**変数**とはプログラムの中で利用するデータを格納するための入れ物のようなものです。  
例えばゲームのプレイヤーのhpの値を入れておくために使います。  
変数は自分で用意する必要があり、  
`int a = 1;`  
`型名 変数名 ＝ 初期化子;`と書くことでaという名前のint型の変数を使いますよと宣言します。  
ここではついでに1で初期化しています。初期化する前はいままでパソコンの中で使われていた何かのデータが入っているので、変数は必ず初期化しましょう。  
`a = 2;`  
これを宣言した後に書けば、初期化した後でも、変数の中に新しいデータを格納することができます。    
`printf("%d\n", a);`  
変数の値を表示するために、ただ単に`printf("a");`とかいてもaという文字が表示されるだけです。そこで変換指定子%をつかいます。%は文字列リテラルの中に書くと、文字としての%と認識されません。%dの部分にint型の整数の値を表示することができます。変数の値を表示する場合、関数に二つ目の実引数として変数名を渡します。\nは**エスケープシーケンス**と言って改行を意味します。  
ここに型の一覧表を示します。  
|型名 | 入れるデータ | 変換指定子 |
| :--- | :--- | :--- |
|int | 整数 | %d|
|float | 小数(表現できる幅が狭いのであまり使わない) | %f|
|double | 小数(floatの二倍の幅を表現できるのでほぼこっちを使う) | %ld|
|char | 文字(一文字しか入れられない) | %c|  

表現できる上限、下限を知りたかったら調べて。
##キーボードからの入力を受け取る  
キーボードからの入力を受け取り、それを表示するサンプルコードを以下に示します。
```c
#include<stdio.h>
int main(void){
  int a;
  double b;
  char c;
  printf("aに入れる値:");
  scanf("%d", &a);
  printf("bに入れる値:");
  scanf("%lf", &b);
  printf("cに入れる値:");
  scanf("%c", &c)
  printf("%d\n", a);
  printf("%lf\n", b);
  printf("%c\n", c);
  return 0;
}
```  
キーボードから入力されたデータを変数に格納するにはscanf関数を呼び出します。  
一つ目の引数には**変換指定子**を渡し、二つ目の引数には&をつけた変数名を渡します。この＆は変数のアドレスを意味します。パソコンのメモリの何番地にデータが入っているかということです。  
## 演算をしたい
プログラムでは当然四則演算などの計算をすることが求められます。  
四則演算をするサンプルコードを以下に示します。  
```c
#include<stdio.h>
int main(void){
  int a = 6,b = 2;
  printf("a+b = %d\n", a+b);//足し算
  printf("a-b = %d\n", a-b);//引き算
  printf("a*b = %d\n", a*b);//掛け算
  printf("a/b = %d\n", a/b);//割り算
  printf("a%%b = %d\n", a%b);//aをbで割ったあまり
  return 0;
}
```  
%d(変換指定子)で演算の結果を表示しています。  
簡単。  
## 条件分岐はif文
ある条件のときある処理を実行し、条件に当てはまらない場合にはある処理を実行しないということを書くことができる文法があります。  
サンプルコードを以下に示します。
```c
#include<stdio.h>
int main(void){
  int num;
  printf("数字を入力:");
  scanf("%d", &num);
  if(num % 2 == 0){  //もしもnumを2で割ったあまりが0なら偶数
    printf("その数は整数です。\n");
  }else{  //偶数じゃなかったら奇数に決まっている
    printf("その数は奇数です。\n");
  }
  return 0;
}
```  
キーボードから数字が入力されると、その数が奇数か偶数かを表示します。  
if文の書き方は  
```c
if(制御式){
  //制御式を評価した結果がtrueなら実行される処理
}else{
  //制御式を評価した結果がfalseなら実行される処理
}
```  
の通りです。  
**制御式**とは「条件」を表現したものです。以下に演算子の表を示します。  
|演算子 | 使い方 | 意味 |
| :--- | :--- | :--- |
|== | a == 1 | aと1が等しい|
|!= | a != 1 | aと1が異なる|
|< | a < 1 | aは1より小さい|
|> | a > 1 | aは1より大きい|
|<= | a <= 1 | aは1以下|
|>= | a >= 1 | aは1以上|  

制御式の中でa==1またはa==2みたいに二つの式を並べて書きたい時ってあるよね。あります。  
そんな時は  
`if(a <= 10 && a >= 0)`**//aが10以下かつ0以上**  
`if(a == 1 || a == 2)`**//aが1と等しいまたは2と等しい**  
という風に式と式をアンパサンド2個かパイプ2個で結びます。  
これでどんな条件でも指定できるね。やったね。
## if文連打が見やすくなるswitch文  
もしも変数aの値によって実行する処理を変えたい場合(パターンマッチともいう)、if文を使おうとすると以下のようになります。  
```c
#include<stdio.h>
int main(){
  int a;
  scanf("%d", &a);
  if(a == 0){
    printf("%dの示す抵抗のカラーコードは黒です。\n", a);
  }else if(a == 1){
    printf("%dの示す抵抗のカラーコードは茶です。\n", a);
  }else if(a == 2){
    printf("%dの示す抵抗のカラーコードは赤です。\n", a);
  }else if(a == 3){
    printf("%dの示す抵抗のカラーコードは橙です。\n", a);
  }else if(a == 4){
    printf("%dの示す抵抗のカラーコードは黄です。\n", a);
  }else if(a == 5){
    printf("%dの示す抵抗のカラーコードは緑です。\n", a);
  }else if(a == 6){
    printf("%dの示す抵抗のカラーコードは青です。\n", a);
  }else if(a == 7){
    printf("%dの示す抵抗のカラーコードは紫です。\n", a);
  }else if(a == 8){
    printf("%dの示す抵抗のカラーコードは灰です。\n", a);
  }else if(a == 9){
    printf("%dの示す抵抗のカラーコードは白です。\n", a);
  }
  return 0;
}
```  
抵抗の値は色で表現されています。 
抵抗に色がついてるんですよね。  
これを使えば実験で抵抗の値がすぐわかりますね!  
まぁ僕は山田と同じ班だったので山田に聞けばすぐわかったんですけど。  
if文を連打するのは見てわかるようにとても読みにくいし、タイプミスなどの可能性があるので推奨されていません。  
switch文を使うと以下のようになります。  
```c
#include<stdio.h>
int main(){
  int a;
  scanf("%d", &a);
  switch(a){
    case 0:  //aの値が0なら実行される
      printf("%dの示す抵抗のカラーコードは黒です。\n", a);
      break;  //switchを抜けるもし書いていないとこの下のcase 1:の処理に進む
    case 1:
      printf("%dの示す抵抗のカラーコードは茶です。\n", a);
      break;
    case 2:
      printf("%dの示す抵抗のカラーコードは赤です。\n", a);
      break;
    case 3:
      printf("%dの示す抵抗のカラーコードは橙です。\n", a);
      break;
    case 4:
      printf("%dの示す抵抗のカラーコードは黄です。\n", a);
      break;
    case 5:
      printf("%dの示す抵抗のカラーコードは緑です。\n", a);
      break;
    case 6:
      printf("%dの示す抵抗のカラーコードは青です。\n", a);
      break;
    case 7:
      printf("%dの示す抵抗のカラーコードは紫です。\n", a);
      break;
    case 8:
      printf("%dの示す抵抗のカラーコードは灰です。\n", a);
      break;
    case 9:
      printf("%dの示す抵抗のカラーコードは白です。\n", a);
      break;
    default:
      printf("どれにも当てはまりません。\n");
      break;
  }
  return 0;
}
```  
switch文を使うと少しは見やすくなったことがわかりますし、case 10:など、新しい選択肢を追加することが容易です。  
## 繰り返しはwhile文  
ある条件を満たす間、繰り返しを行う文法があります。  
サンプルコードを以下に示します。  
```c
#include<stdio.h>
int main(){
  int num = 0;
  while(num < 10){  //numが10より小さい間繰り返す。
    printf("10以上の数を入力してください");
    scanf("%d", &num);
  }
  printf("入力した値:%d\n", num);
  return 0;
}
```  
10以上の値が入力されるまで入力を要求し続けます。  
while文の書き方は以下の通りです。  
```c
while(制御式){  //ここに来ると制御式を評価する
  //制御式がtrueなら実行する
}  //while(){の行に移動
  //falseならwhile文が終わる
```  
## ループする回数を決めたいときはfor文  
ループしたい回数が決まっているときはfor文という文法を使います。  
サンプルコードを以下に示します。  
```c
#include<stdio.h>
int main(){
  int i;
  for(i = 5; i >= 0; i--){
    printf("カウントダウン:%d\n");
  }
  return 0;
}
```
5,4,3,2,1,0とカウントダウンするプログラムです。  
for文の書き方は以下の通りです。  
```c
for(最初に一回だけ実行される文;制御式(whileと同じ);for文の最後に実行される文){/*で文字列を囲むとコメントを書けます。*/
  /*制御式がtrueなら実行される。*/
}
```  
また、for文をwhile文で書き換えることもできます。  
```c
#include<stdio.h>
int main(){
  int i;
  i = 5
  while(i >= 0){
    printf("カウントダウン:%d\n");
    i--;
  }
  return 0;
}
```
`i--;`は`i++;`と同じような処理をします。  
つまり`i = i - 1;`ということ。デクリメントといいます。  

これで条件分岐や繰り返し文のすべてが終わりました。~~do-whileなんてなかった。いいね？~~  
自分で制御式を書き換えたり、異なる文法を使い分けながら習得していきましょう。 

## 配列ってなんや？  
配列とは変数が集まってメモリ上に一直線上に並んだものです。  
同じ役割を持つ変数(全クラスの人数を格納するint型の変数)を大量に宣言class1-1,class1-2,...してしまうと面倒です。  
配列を用いて管理すると、それらの問題を解決できます。  
サンプルコードを以下に示します。  
```c
#include<stdio.h>
int main(){
  int i;
  int class[5] = {42,43,42,44,45};
  for(i = 0;i < 5; i++){
    printf("クラス%dの人数は%d人です。\n", i, class[i]);
  }
  return 0;
}
```
配列の宣言は以下のように行います。  
`型名 識別子[要素数];`  
要素数はint型の変数何個分の配列を宣言するかを表します。  
サンプルコードでは宣言と一緒に初期化を行っているので上記のような書き方をしていますが、代入をしたい場合は`class[3] = 41;`という風に記述するとclassの四番目に41が代入されます。  
配列の要素は0から始まるので、classの3番目は`class[2]`という風になります。誤って`class[5]`を参照してしまうと、**配列外参照**が起こってしまうのでプログラムが予期しない動作をすることがあります。気を付けましょう。  
for文を使うと配列の1番目`class[0]`から配列の最後`class[4]`までなど好きな要素から要素まで参照できます。この使い方は覚えましょう。  
## ある配列の内容をそのまま別の配列に代入したい  
プログラムに`配列名1[] = 配列名2[];`と書いてもエラーを吐きます。配列の中身を1個ずつ代入していくしかありません。  
サンプルコードを以下に示します。  
```c
#include<stdio.h>
int main(){
  int i;
  int a[5] = {11, 22, 33};//初期化子を指定していない要素は0で初期化される。
  int b[5];
  for(i = 0;i < 5; i++){
    b[i] = a[i];
  }
  for(i = 0;i < 5; i++){
    printf("b[%d] = %d\n", i, b[i]);
  }
  printf("%d")
  return 0;
}
```  
## 二次元配列について  
変数を一直線的に並べたものを一次元配列と表現すると、一次元配列を一直線上に並べたものが二次元配列になります。  
イメージとしては九九の表のようなものです。  
実際に二次元配列を作って九九を格納、表示するサンプルコードを以下に示します。  
```c
#include<stdio.h>
int main(){
  int table[9][9];
  int i, j;
  for(i = 1;i < 10; i++){
    for(j = 1;j < 10; j++){
      table[i][j] = i*j;
    }
  }
  for(i = 1;i < 10; i++){
    for(j = 1;j < 10; j++){
      printf("%3d", table[i][j]);
    }
    printf("\n");
  }
}
```
for文のなかにfor文を書いて配列すべてを走査(全部調べるみたいな意味)しています。  
二次元配列の宣言は  
`型名 識別子[Y軸方向の要素数][X軸方向の要素数];`  
という風に記述します。  
初期化は  
`int table[9][9] = {{1,2,3,4,5,6,7,8,9},{2,4,6,8,10,12,14,16,18},{3,6,9,12,15,18,21,24,27}/*略*/};`  
という風に記述します。  
変換指定子が`%3d`と見慣れないものになっていますが、これは一桁でも三桁分のスペースに表示してくださいという指定です。  
教科書の最後にprintfとscanfについての詳しい説明があり、読む気が失せる文章ですが読んでください。使いたいときに見返して使えればOKです。  
教科書がない人は[ここ](https://webkaru.net/clang/printf-format-specifiers/)のサイトを見てください。  
## 自分で関数を作ろう
